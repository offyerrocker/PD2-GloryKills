<?xml version="1.0"?>
<tweaks>

<!-- add fp execution state -->	
	<tweak version="2" name="anims/units/enemies/cop/std" extension="animation_states">
		<search>
			<xml/>
			<state name="std"/>
		</search>
		
		<target mode="attach">
			<to name="execution" redirect="std/stand/execution"/>
		</target>
	</tweak>
	
<!-- define anim to play during execution state -->
	<tweak version="2" name="anims/units/enemies/cop/std" extension="animation_states">
		<search>
			<xml/>
		</search>
		
		<target mode="attach">
			<state name="std/stand/execution" type="mix" segment="base" speed="1.0">
				<param name="front_hand_var1" value="0"/>
				<param name="rear_hand_var1" value="0"/>
				<param name="front_knife_var1" value="0"/>
				<param name="rear_knife_var1" value="0"/>
				<param name="front_axe_var1" value="0"/>
				<param name="rear_axe_var1" value="0"/>
				<anim name="heister_execution_front" weight="front_hand_var1"/>
				<anim name="heister_execution_rear" weight="rear_hand_var1"/>
				<anim name="heister_execution_knife_front" weight="front_knife_var1"/>
				<anim name="heister_execution_knife_rear" weight="rear_knife_var1"/>
				<anim name="heister_execution_axe_front" weight="front_axe_var1"/>
				<anim name="heister_execution_axe_rear" weight="rear_axe_var1"/>
				<keys>
					<key at="enter"    	callback="anim_execution_spawn_melee_prop"     class_name="movement" param1="a_weapon_right_front" param2="melee_weapon_prop"/>
					<key at="trigger" trigger="execution_slap" 		callback="play_execution_sound_equipped" 	class_name="movement" param1="hit_gen" param2="1" />
					<key at="trigger" trigger="execution_slap" 		callback="play_execution_sound" 			class_name="movement" param1="hit_gen" param2="1" />
					<key at="trigger" trigger="execution_punch" 	callback="play_execution_sound" 			class_name="movement" param1="hit_body" param2="1" />
					<key at="trigger" trigger="execution_punch" 	callback="play_execution_sound_equipped" 	class_name="movement" param1="hit_body" param2="1" />
					<key at="trigger" trigger="execution_grab" 		callback="play_execution_sound" 			class_name="movement" param1="hit_gen" param2="1" />
					<key at="trigger" trigger="execution_grab" 		callback="play_execution_sound_equipped" 	class_name="movement" param1="hit_gen" param2="1" />
					<key at="trigger" trigger="execution_kill" 		callback="play_execution_sound" 			class_name="movement" param1="hit_body" param2="1" />
					<key at="trigger" trigger="execution_kill" 		callback="play_execution_sound_equipped" 	class_name="movement" param1="hit_body" param2="1" />
					<key at="exit"    callback="anim_clbk_unspawn_execution_melee_prop"     class_name="movement" param0="melee_weapon_prop"/>
					<key at="exit" 	  callback="anim_stop_execution" class_name="movement"/>
				</keys>
				<exit name="std/spawn/loop"/>
				<!--
				<exit name="std/stand/still/idle/look"/>
				<exit name="std/spawn/loop"/>
				<exit name="std/stand/still"/>
				-->
			</state>
		</target>
	</tweak>
	
	
<!-- add redirects to point to the new anim state -->
	<tweak version="2" name="anims/units/enemies/cop/std" extension="animation_states">
		<search>
			<xml/>
			<state name="std"/>
		</search>
		
		<target mode="attach">
			<to name="death_execution" redirect="std/death/execution"/>
		</target>
	</tweak>

	<tweak version="2" name="anims/units/enemies/cop/std" extension="animation_states">
		<search>
			<xml/>
			<state name="std/crouch"/>
		</search>
		
		<target mode="attach">
			<to name="death_execution" redirect="std/death/execution"/>
		</target>
	</tweak>
	
	<!-- add new state transitions here
	<tweak version="2" name="anims/units/enemies/cop/std" extension="animation_states">
		<search>
			<xml/>
			<state name="std/zipline"/>
		</search>
		
		<target mode="attach">
			<to name="death_execution" redirect="std/death/execution"/>
		</target>
	</tweak>
	-->
	
	
<!-- define anim to play during executed state -->
	<tweak version="2" name="anims/units/enemies/cop/std" extension="animation_states">
		<search>
			<xml/>
		</search>
		
		<target mode="attach">
			<state name="std/death/execution" type="mix" segment="base">
				<param name="front_hand_var1" value="0"/>
				<param name="rear_hand_var1" value="0"/>
				<param name="front_knife_var1" value="0"/>
				<param name="rear_knife_var1" value="0"/>
				
				<anim name="gen_death_execution_front" weight="front_hand_var1"/>
				<anim name="gen_death_execution_rear" weight="rear_hand_var1"/>
				<anim name="gen_death_execution_knife_front" weight="front_knife_var1"/>
				<anim name="gen_death_execution_knife_rear" weight="rear_knife_var1"/>
				<anim name="gen_death_execution_axe_front" weight="front_axe_var1"/>
				<anim name="gen_death_execution_axe_rear" weight="rear_axe_var1"/>
				<keys timebase="relative"> <!-- should this be "frames" or "relative"? | pb: probably relative -->
					
					<key at="trigger" trigger="execution_slap" callback="anim_execution_generic" class_name="character_damage" param1="1"/>
					<key at="trigger" trigger="execution_punch" callback="anim_execution_generic" class_name="character_damage" param1="2"/>
					<key at="trigger" trigger="execution_grab" callback="anim_execution_generic" class_name="character_damage" param1="3"/>
					<key at="trigger" trigger="execution_kill" callback="anim_execution_generic" class_name="character_damage" param1="4"/>
					
					<key at="trigger" trigger="death" callback="anim_clbk_force_ragdoll" class_name="movement" />
					<key at="death" callback="anim_execution_generic" class_name="character_damage" param1="6"/>
					
					<key at="enter" callback="anim_execution_generic" class_name="character_damage" param1="7"/>
					<key at="exit" callback="anim_execution_generic" class_name="character_damage" param1="8"/>
					
					<key at="enter" set_extension="anim_data" extension_key="death" extension_value="true"/>
					<key at="exit" set_extension="anim_data" extension_key="death" extension_value="false"/>
					<key at="exit" callback="anim_clbk_force_ragdoll" class_name="movement"/>
					<key at="exit" set_extension="anim_data" extension_key="ragdoll" extension_value="false"/>
				</keys>
				<exit name="death_exit"/>
			</state>
		</target>
	</tweak>
	
</tweaks>